jobs:
  build:
    environment:
      ONEDRIVE_ACCESS_TOKEN: eyJ0eXAiOiJKV1QiLCJub25jZSI6InhOOGRQYTlBbVZhTTRCaF9KYk4wVnBUdkE3VEI3NVpwWEVQX1hBX29WeG8iLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC80MzUwYjU4ZC02MzZkLTRkYWYtYTBmZi05N2Q2NzBmZDlhOTgvIiwiaWF0IjoxNjg1ODA0ODY3LCJuYmYiOjE2ODU4MDQ4NjcsImV4cCI6MTY4NTg5MTU2NywiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkFUUUF5LzhUQUFBQVBHRUJ0eUJ5bDNYN0IxK0d2TUgyZkJpUlFOS3hSUGdpc255Tm96ZWxudU9FYW9lN2Z0RVhPYm5ZaXczQUh3S28iLCJhbXIiOlsicHdkIl0sImFwcF9kaXNwbGF5bmFtZSI6IkdyYXBoIEV4cGxvcmVyIiwiYXBwaWQiOiJkZThiYzhiNS1kOWY5LTQ4YjEtYThhZC1iNzQ4ZGE3MjUwNjQiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6IkFodGVzaGFtIEFobWFkIiwiZ2l2ZW5fbmFtZSI6Ik1EIiwiaWR0eXAiOiJ1c2VyIiwiaXBhZGRyIjoiMjQwNjo3NDAwOmM4OmJhYTY6NmMwNjoxZGVmOjlhZWU6MWRiYyIsIm5hbWUiOiJNRCBBaHRlc2hhbSBBaG1hZCIsIm9pZCI6ImI0YzBhNjljLThlOGQtNDA4Zi05ZWEyLWRkOTI4NDg0N2JmNyIsInBsYXRmIjoiMyIsInB1aWQiOiIxMDAzMjAwMjVEMkJCRUVEIiwicmgiOiIwLkFWTUFqYlZRUTIxanIwMmdfNWZXY1AyYW1BTUFBQUFBQUFBQXdBQUFBQUFBQUFCVEFJRS4iLCJzY3AiOiJGaWxlcy5SZWFkIG9wZW5pZCBwcm9maWxlIFVzZXIuUmVhZCBlbWFpbCIsInNpZ25pbl9zdGF0ZSI6WyJrbXNpIl0sInN1YiI6ImxSYlVUVDllUFBKdzRuV1NWQXFQTXhYRVZQYW1EcEFqY2FkQzE1YzA3aDQiLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiQVMiLCJ0aWQiOiI0MzUwYjU4ZC02MzZkLTRkYWYtYTBmZi05N2Q2NzBmZDlhOTgiLCJ1bmlxdWVfbmFtZSI6Im1kYWh0ZXNoYW1haG1hZEBuc2VpdC5jb20iLCJ1cG4iOiJtZGFodGVzaGFtYWhtYWRAbnNlaXQuY29tIiwidXRpIjoic2V1T0U0eUdwa1M3cGxaWUd0MmpBQSIsInZlciI6IjEuMCIsIndpZHMiOlsiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il0sInhtc19jYyI6WyJDUDEiXSwieG1zX3NzbSI6IjEiLCJ4bXNfc3QiOnsic3ViIjoiMUNOY2h2bktKOF9FTWRqUnp4cE42Rm1iRWQ1RmZYTThiS1d6YjV2d1lMayJ9LCJ4bXNfdGNkdCI6MTU0Njk0NTY2NH0.Fn38dwbR1dwMlVMVupDAMb5vZYh-wH-8UVhZC52NzR9V30UOz7fZ4nAluhlxxGABub-Yb_2IeydHHE6k0Zw4RDYUNvJBk0f7_IDT0O0gQf6nKe4hrX9uRSMk1CMXH_hhKlVaVg0l8VbK7Qu98VG-xCg6GmIThy_35tD_2VbuLvvvRhVohr3F_gkDk0E-uzpdmSPI79NUq9NgGtAaN7IKnWFTvdxjXFHrXHHWkQyJANsi9_CXu01_4Ql2W90oG5enMoACib6JiFCo9bvGhIglrRS-XmbgmTktZvxb54Ns45aqnoJiQYHg5khWcn1p68gsmIUqNPbMdinVhi6wUQ0NBw
    docker:
      - image: circleci/node:14

    steps:
    - run:
        name: Create artifact
        command: |
          echo "This is an example artifact" > example.txt
    - run:
        name: Upload to OneDrive
        command: |
          curl -X POST \
            -H "Authorization: Bearer $ONEDRIVE_ACCESS_TOKEN" \
            -H "Content-Type: application/json
            -T example.txt \
            "https://graph.microsoft.com/v1.0/me/drive/root/children"